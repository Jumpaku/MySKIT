<!DOCTYPE html>
<html lang="ja">
	<head>
	<meta charset="UTF-8">
	<title>Myskit by Jumpaku</title>
		<script>
			var canvas;
			var context;
			var points = [];
			var prev;
			var next;
			function drawLine(){
				if(prev && next){
					context.beginPath();
					context.moveTo(prev.x, prev.y);
					context.lineTo(next.x, next.y);
					context.closePath();
					context.stroke();
				}
			};
			function addPoint(e){
				prev = next;
				next = {
					x: e.clientX,
					y: e.clientY,
				};
			}

			function start(){
				canvas = document.getElementById("maincanvas");
				context = canvas.getContext("2d");
				var addLine = function(e){
					addPoint(e);
					drawLine();
				};
				var startDraw = function(){
					canvas.removeEventListener("mousedown", startDraw);
					canvas.addEventListener("mousemove", addLine);
					canvas.addEventListener("mouseup", function(){
						canvas.removeEventListener("mousemove", addLine);
						prev = null;
						next = null;
						canvas.addEventListener("mousedown", startDraw);
					});
				}
				canvas.addEventListener("mousedown", startDraw);
			}
		</script>
	</head>
	<body onload="start();">

		<canvas id="maincanvas" height="480" width="640"></canvas>

	</body>
</html>
